{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { useAuth } from '../../AuthContext';\nexport const useSignIn = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const {\n    setIsLoggedIn\n  } = useAuth();\n  const {\n    handleLogin\n  } = useAuth();\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setError('');\n    const payload = {\n      username,\n      password\n    };\n    try {\n      const response = await fetch('http://localhost:3000/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Invalid credentials');\n      }\n      const data = await response.json();\n      localStorage.setItem('username', data.username);\n      localStorage.setItem('token', data.token || 'logged-in');\n      setIsLoggedIn(true);\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n  return {\n    username,\n    setUsername,\n    password,\n    setPassword,\n    error,\n    handleSubmit\n  };\n};\n_s(useSignIn, \"DIU1TYco9o7b+N5+6PX507y7ktA=\", false, function () {\n  return [useAuth, useAuth];\n});","map":{"version":3,"names":["useState","useAuth","useSignIn","_s","username","setUsername","password","setPassword","error","setError","setIsLoggedIn","handleLogin","handleSubmit","event","preventDefault","payload","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","Error","message","data","localStorage","setItem","token","err"],"sources":["C:/Users/User/Projects/QUT_IF717_webDevCapstone/Project/capstone-app/client/src/Components/Hooks/useSignIn.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { useAuth } from '../../AuthContext';\r\n\r\nexport const useSignIn = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const { setIsLoggedIn } = useAuth();\r\n    const { handleLogin } = useAuth();\r\n\r\n    const handleSubmit = async (event) => {\r\n        event.preventDefault();\r\n        setError('');\r\n        const payload = { username, password };\r\n        try {\r\n            const response = await fetch('http://localhost:3000/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(payload),\r\n            });\r\n            if (!response.ok) {\r\n                const errorData = await response.json();\r\n                throw new Error(errorData.message || 'Invalid credentials');\r\n            }\r\n            const data = await response.json();\r\n            localStorage.setItem('username', data.username);\r\n            localStorage.setItem('token', data.token || 'logged-in');\r\n            setIsLoggedIn(true);\r\n        } catch (err) {\r\n            setError(err.message);\r\n        }\r\n    };\r\n\r\n    return { username, setUsername, password, setPassword, error, handleSubmit };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,OAAO,QAAQ,mBAAmB;AAE3C,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACM,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM;IAAEU;EAAc,CAAC,GAAGT,OAAO,CAAC,CAAC;EACnC,MAAM;IAAEU;EAAY,CAAC,GAAGV,OAAO,CAAC,CAAC;EAEjC,MAAMW,YAAY,GAAG,MAAOC,KAAK,IAAK;IAClCA,KAAK,CAACC,cAAc,CAAC,CAAC;IACtBL,QAAQ,CAAC,EAAE,CAAC;IACZ,MAAMM,OAAO,GAAG;MAAEX,QAAQ;MAAEE;IAAS,CAAC;IACtC,IAAI;MACA,MAAMU,QAAQ,GAAG,MAAMC,KAAK,CAAC,6BAA6B,EAAE;QACxDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,OAAO;MAChC,CAAC,CAAC;MACF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;QACd,MAAMC,SAAS,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;QACvC,MAAM,IAAIC,KAAK,CAACF,SAAS,CAACG,OAAO,IAAI,qBAAqB,CAAC;MAC/D;MACA,MAAMC,IAAI,GAAG,MAAMZ,QAAQ,CAACS,IAAI,CAAC,CAAC;MAClCI,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACxB,QAAQ,CAAC;MAC/CyB,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,IAAI,CAACG,KAAK,IAAI,WAAW,CAAC;MACxDrB,aAAa,CAAC,IAAI,CAAC;IACvB,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACVvB,QAAQ,CAACuB,GAAG,CAACL,OAAO,CAAC;IACzB;EACJ,CAAC;EAED,OAAO;IAAEvB,QAAQ;IAAEC,WAAW;IAAEC,QAAQ;IAAEC,WAAW;IAAEC,KAAK;IAAEI;EAAa,CAAC;AAChF,CAAC;AAACT,EAAA,CA/BWD,SAAS;EAAA,QAIQD,OAAO,EACTA,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}